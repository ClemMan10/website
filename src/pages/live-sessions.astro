---
import { Picture } from "astro:assets";
import Navbar from "../components/Navbar.astro";
import Layout from "../layouts/Layout.astro";
import YouTubeGrid from "../components/YouTubeGrid.astro";
---

<style is:global lang="scss">
  @use "bulma/sass/layout/hero";
  @use "bulma/sass/layout/container";
  @use "bulma/sass/elements/title";

  /* RESET si tu n'as pas déjà cette règle */
  *,
  *::before,
  *::after { box-sizing: border-box; }

  a {
  color: inherit;
  text-decoration: underline;
  }

  a:hover {
    color: inherit;
    text-decoration-thickness: 2px; /* optionnel, pour un soulignement plus visible */
  }


  /* wrapper interne centré dans la colonne centrale fournie par Layout */
  .diffusion-inner {
    display: flex;
    flex-wrap: nowrap;        /* no wrap par défaut sur desktop */
    gap: 1.5rem;
    align-items: flex-start;
    justify-content: flex-start;
    width: 100%;
    max-width: 1200px;         /* borne raisonnable, aligne avec les autres sections */
    margin: 0 auto;           /* centre dans la .container */
    box-sizing: border-box;
  }

  /* Permet au flex de réduire correctement (évite l'overflow) */
  .diffusion-inner > * { min-width: 0; }

  /* Texte : prend la majorité de l'espace */
  .diffusion-text {
    flex: 1 1 60%;
    min-width: 0;
    /* ajuste l'interligne si besoin */
    /* padding-right: 0.5rem; */
  }

  /* Vidéo : fixe une largeur max pour éviter le tiraillement */
  .diffusion-video-wrapper {
    flex: 0 0 36%;    /* taille fixe relative sur desktop */
    max-width: 420px; /* évite dépassement visuel */
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    align-items: flex-start;
    box-sizing: border-box;
  }

  /* responsive wrapper pour l'iframe */
  .video-embed {
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background: #000;
    border-radius: 6px;
  }

  .video-embed iframe {
    width: 100%;
    height: 100%;
    border: 0;
    display: block;
  }

  /* bouton : position naturelle au-dessus de la vidéo */
  .youtube-btn {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    padding: .6rem 1rem;
    border-radius: .5rem;
    text-decoration: none;
    align-self: flex-start;
  }

  /* ========== MOBILE / TABLETTE ========== */
  @media (max-width: 992px) {
    .diffusion-inner {
      flex-direction: column;   /* empile texte puis vidéo */
      align-items: center;      /* centre le contenu */
      gap: 1.25rem;
      max-width: 900px;         /* cohérence avec sections */
      padding: 0 1rem;
    }

    .diffusion-text,
    .diffusion-video-wrapper {
      flex: 1 1 100%;
      max-width: 100%;
      min-width: 0;
      text-align: center;
    }

    .diffusion-video-wrapper {
      align-items: center;
    }

    .youtube-btn { align-self: center; }

    .video-embed { width: 100%; max-width: 900px; }
  }
  .cover-image {
    background:
      linear-gradient(0deg, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 1) 100%),
      url("/live-sess-cover-small.jpg") center/cover;
      //url("/cover.jpg") center/cover;
    text-align: center;
    font-weight: 700;
    h1,
    h2 {
      color: white;
    }
  }

  .youtube-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-size: 1.1rem;
    font-weight: 600;
    color: #fff;
    background: linear-gradient(90deg, #ff0000 0%, #e52d27 100%);
    border: 2px solid #ff0000;
    border-radius: 0.5rem;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }

  .youtube-btn:hover {
    background: #fff;
    color: #ff0000;
    border-color: #ff0000;
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0,0,0,0.15);
  }

  .youtube-btn .icon {
    font-size: 1.4rem;
  }
</style>

<Layout>
  <Navbar slot="navbar" />
  <div class="hero is-medium cover-image">
    <div class="container hero-body">
      <h1 class="title">LIVE SESSIONS</h1>
      <h2 class="subtitle">Captation, Mixage, Mastering, Edition, Colorimétrie</h2>
    </div>
  </div>
  <section class="filled">
      <div class="container">
        <p>
          Le studio In the Pouchett est spécialisé dans la réalisation de Live Sessions.
          Nous proposons un service complet allant de la captation audio et vidéo à la
          post-production (mixage, mastering, édition et colorimétrie).<br />

          L'enregistrement se déroule dans un cadre chaleureux et intimiste, idéal pour livrer votre meilleure performance.
        </p>
      </div>
  </section>
  <section class="pattern">
      <div class="container">
        <p>
          Nous pouvons accueillir jusqu'à 7 musicien·nes simultanément avec retours casques indépendants.
          Notre plateau est modulable et s'adaptera à chaque projet de création et à chaque formation musicale.<br />
          De plus nous mettons à disposition tout le matériel et instruments dont nous disposons (cf. section <a href="/#materiel">Le Matériel</a>).
        </p>
      </div>
  </section>

  <section class="filled" id="formats">
    <h1>Formats</h1>
    <div class="container">
      <div class="formats-grid">
        
        <!-- Format 1 -->
        <div class="format-card">
          <div class="card-image">
            <img src ="/classic-live-sess.jpg" alt="Live in the Pouchett" />
          </div>
          <div class="card-content">
            <h3><strong>Format <i>Live in the Pouchett</i></strong></h3>
            <p>
              Le format “classique” d'une captation live.  
              Possibilité de refaire plusieurs prises pour garantir la meilleure qualité, 
              avec des plans d'inserts pour enrichir le rendu visuel.
            </p>
          </div>
        </div>

        <!-- Format 2 -->
        <div class="format-card">
          <div class="card-image">
            <img src="/live-concert.jpg" alt="Concert in the Pouchett" />
          </div>
          <div class="card-content">
            <h3><strong>Format <i>Concert in the Pouchett</i></strong></h3>
            <p>
              Une expérience plus spontanée et énergique.  
              Petit public (≈10 personnes) pour recréer l'ambiance d'un concert intimiste, 
              capté en one-shot sur une vingtaine de minutes.
            </p>
          </div>
        </div>

        <!-- Format 3 -->
        <div class="format-card">
          <div class="card-image">
            <img src="/custom-live-sess.jpg" alt="Format Custom" />
          </div>
          <div class="card-content">
            <h3><strong>Format Custom</strong></h3>
            <p>
              Un projet particulier en tête ? Envie de filmer dans un lieu spécifique ? 
              Nous concevons avec vous un format sur-mesure, adapté à votre univers.
            </p>
          </div>
        </div>

      </div>
    </div>
  </section>

  <section class="pattern" id="diffusion">
    <h1>Diffusion</h1>

    <!-- <-- enfant DIRECT du section : respecte le grid du Layout -->
    <div class="container">
      <!-- wrapper interne qui contient le flex et est centré par le container -->
      <div class="diffusion-inner">
        <div class="diffusion-text">
          <p>
            Chez ITP, nous avons fait le choix de centraliser la diffusion de nos Live Sessions afin de bâtir une véritable communauté autour du studio.  
            Chaque session est ainsi mise en valeur sur notre chaîne YouTube et nos réseaux sociaux, pour maximiser son impact et toucher un public déjà engagé.  
            Pour prolonger cette visibilité, nous pouvons également vous offrir la possibilité de partager un ou deux titres de la session sur votre propre chaîne, afin de créer du lien direct avec vos abonnés.  
            Et si vous souhaitez aller plus loin, des options de diffusion élargie peuvent être envisagées ensemble.
          </p>
        </div>

        <div class="diffusion-video-wrapper">
          <a 
            href="https://www.youtube.com/@inthepouchett?sub_confirmation=1" 
            target="_blank" 
            rel="noopener noreferrer"
            class="youtube-btn"
          >
            <span class="icon"><i class="fab fa-youtube"></i></span>
            <span>Notre chaîne YouTube</span>
          </a>

          <div class="video-embed">
            <iframe 
              src="https://www.youtube.com/embed/videoseries?si=G4ySTrE8hW2nuyV5&amp;list=PLOso5G9jp8_Bz3MI54AVnI6T_mRsqTU0P" 
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen>
            </iframe>
          </div>
        </div>
      </div> <!-- .diffusion-inner -->
    </div> <!-- .container -->
  </section>

  <section class="filled" id="tarifs">
    <h1>Tarifs</h1>
    <div class="container">
      <p>
        Nos tarifs sont adaptés en fonction du format choisi et des services inclus. 
        N'hésitez pas à nous contacter pour obtenir un devis personnalisé.
      </p>
    </div>
  </section>
</Layout>
