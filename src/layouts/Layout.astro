---
import Contact from "../components/Contact.astro";
---

<!doctype html>
<html lang="en" class="has-navbar-fixed-top">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
    />

    <title>In the Pouchett</title>
  </head>

  <body>
    <slot name="navbar" />
    <main>
      <slot />
    </main>
    <Contact />

    <!-- Script dâ€™animation au scroll -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const cards = document.querySelectorAll(".format-card");
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("is-visible");
              }
            });
          },
          { threshold: 0.2 }
        );
        cards.forEach((card) => observer.observe(card));
      });
    </script>
  </body>
</html>

<style is:global lang="scss">
  @use "bulma/sass/base";
  @use "bulma/sass/themes";
  @use "../styles/pattern.scss";

  /* --- Variables typographie --- */
  :root {
    --font-base: 1.25rem;          /* Texte normal */
    --font-card: 0.9rem;        /* Texte dans les cards */
    --font-h1: clamp(1.5rem, 4vw, 2.5rem);   /* h1 global */
    --font-h1-section: clamp(1.5rem, 5vw, 2rem); /* h1 sections */
    --font-h2: clamp(1.25rem, 3vw, 2rem);
    --font-h3: 1.2rem;
    --navbar-font: 1rem;
  }

  html, body {
    margin: 0;
    font-family: "Open Sans", sans-serif;
    font-size: var(--font-base);
    width: 100%;
  }

  nav { font-size: var(--navbar-font); }

  /* --- Sections --- */
  .filled, .pattern { padding: 2rem; }

  .filled {
    background-color: rgb(8, 15, 37);
    color: white;
    strong { font-weight: bold; color: inherit; }
  }

  .pattern { color: black; }

  /* --- Titres --- */
  h1 { font-size: var(--font-h1); text-transform: uppercase; text-align: center; }
  h1.filled, h1.pattern { font-size: var(--font-h1-section); } /* sections */
  h2 { font-size: var(--font-h2); }
  h3 { font-size: var(--font-h3); }

  .filled p, .filled li, .pattern p, .pattern li {
    font-size: var(--font-base);
  }

  /* --- Section Formats --- */
  .formats-grid {
    display: grid;
    gap: 2rem;
    grid-template-columns: 1fr;

    @media (min-width: 768px) { grid-template-columns: repeat(2, 1fr); }
    @media (min-width: 1024px) { grid-template-columns: repeat(3, 1fr); }
  }

  .format-card {
    background: white;
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;

    &:nth-child(1) { transition-delay: 0s; }
    &:nth-child(2) { transition-delay: 0.15s; }
    &:nth-child(3) { transition-delay: 0.3s; }

    &.is-visible { opacity: 1; transform: translateY(0); }

    .card-image img { width: 100%; height: auto; display: block; }

    .card-content {
      padding: 1rem;
      font-size: var(--font-card);
      color: black;

      h3 { font-size: var(--font-h3); margin-bottom: 0.5rem; }
      p  { font-size: var(--font-card); }
    }

    &:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
  }

  /* --- Layout global --- */
  section {
    display: grid;
    grid-template-columns: minmax(1rem, 1fr) minmax(20rem, 3fr) minmax(1rem, 1fr);
    & > * { grid-column: 2; }
  }

  footer { width: 100%; }
</style>
